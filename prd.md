# UGC Agent - AI视频解说生成器 PRD

## 1. 产品概述

### 1.1 产品定位
UGC Agent是一个开源的AI驱动视频解说生成工具，专为个人内容创作者设计，帮助用户快速将优质的YouTube视频和博客文章转换为中文解说视频，用于短视频平台发布。

### 1.2 核心价值
- **内容再创作**：将英文优质内容本土化，降低语言门槛
- **效率提升**：自动化视频制作流程，从小时级降至分钟级
- **开源生态**：提供完整的开源解决方案，支持社区定制和扩展

### 1.3 目标用户
- **主要用户**：个人内容创作者、知识博主、短视频制作者
- **用户特征**：具备基础技术能力，关注海外优质内容，希望制作中文解说视频

## 2. 功能规格

### 2.1 核心功能模块

#### 2.1.1 视频翻译模块
**输入**：YouTube视频链接 + "翻译"指令
**处理流程**：
1. **视频获取**：下载YouTube视频和音频文件
2. **语音识别**：提取原始语言（主要为英文）字幕
3. **字幕翻译**：生成中英对照字幕和纯中文字幕
4. **语音合成**：基于中文字幕生成配音音频
5. **视频合成**：替换原音频，生成中文配音视频

**预览节点**：
- 原始字幕确认
- 翻译质量检查
- 配音效果预听

#### 2.1.2 视频解读模块
**输入**：YouTube视频链接 + "解读"指令
**处理流程**：
1. **内容提取**：下载视频并转换为文本
2. **智能解读**：使用DeepSeek/Gemini/Kimi生成中文解读文本
3. **配音生成**：将解读文本转换为语音
4. **视频编辑**：根据解读内容节奏剪辑原视频
5. **最终合成**：生成解读版视频

**预览节点**：
- 解读文本编辑
- 视频片段选择
- 配音时长匹配

#### 2.1.3 博客转视频模块
**输入**：博客文章链接
**处理流程**：
1. **内容抓取**：获取博客完整文本内容
2. **解读生成**：DeepSeek/Gemini/Kimi生成中文解读脚本
3. **配音制作**：文本转语音处理
4. **视觉生成**：AI生成配套图片素材
5. **视频制作**：图片+配音合成视频

**预览节点**：
- 解读脚本编辑
- 图片素材确认
- 最终效果预览

### 2.2 技术规格

#### 2.2.1 输入支持
- **视频格式**：YouTube链接（支持多种分辨率）
- **博客平台**：主流博客平台和个人网站
- **内容质量**：针对高质量英文内容优化

#### 2.2.2 输出规格
- **视频格式**：MP4（H.264编码）
- **分辨率**：1080p（可配置720p/4K）
- **音频质量**：48kHz/16bit
- **时长限制**：单个视频最长60分钟

#### 2.2.3 处理性能
- **批处理模式**：基于Python内置队列的任务管理
- **处理时间**：视频长度的2-3倍时间
- **并发能力**：支持最多3个任务并行（基于线程池）

## 3. 用户界面设计

### 3.1 Web UI 架构
- **首页**：任务创建和配置界面
- **处理页面**：实时进度显示和预览功能
- **历史记录**：任务管理和文件下载
- **设置页面**：AI模型配置、参数调整和工具集成

### 3.2 核心交互流程
1. **任务创建**：输入链接 → 选择处理模式 → 配置参数
2. **预览确认**：关键节点预览 → 用户调整 → 确认继续
3. **批量管理**：队列查看 → 优先级调整 → 批量操作

### 3.3 预览和调整功能
- **文本编辑器**：支持解读文本的实时编辑
- **音频预览**：配音效果试听和调整
- **视频预览**：关键片段的预览和微调
- **参数调整**：语速、音调、图片风格、AI模型选择等

## 4. 技术架构

### 4.1 核心组件
- **前端界面**：基于React/Vue的Web UI
- **后端服务**：Python Flask/FastAPI框架
- **Agent框架**：LangGraph（工作流编排和状态管理）
- **任务队列**：Python queue模块 + threading异步处理
- **存储系统**：本地文件系统

### 4.2 AI服务集成
- **语音识别**：Whisper API
- **文本处理**：DeepSeek API / Google Gemini API / Kimi API（支持多模型切换）
- **语音合成**：用户现有TTS工具集成
- **图像生成**：DALL-E 3/Stable Diffusion API

### 4.3 LangGraph工作流设计

#### 4.3.1 核心工作流图
```
输入节点 → 内容类型检测 → 分支路由
    ├─ 视频翻译流程
    │   ├─ 视频下载 → 语音提取 → 字幕生成 → [预览点] → 翻译处理 → [预览点] → 配音生成 → 视频合成
    ├─ 视频解读流程  
    │   ├─ 视频下载 → 文本提取 → 解读生成 → [预览点] → 配音生成 → 视频剪辑 → 最终合成
    └─ 博客转视频流程
        ├─ 内容抓取 → 解读生成 → [预览点] → 配音生成 → 图片生成 → [预览点] → 视频制作
```

#### 4.3.2 状态管理
- **GraphState**：包含任务ID、处理状态、中间文件路径、用户配置等
- **检查点机制**：支持在预览节点暂停，等待用户确认
- **错误恢复**：API调用失败时的自动重试和人工干预

#### 4.3.3 节点类型
- **处理节点**：执行具体的AI/视频处理任务
- **预览节点**：暂停流程，等待用户确认或调整
- **条件节点**：根据处理结果决定下一步路径
- **工具节点**：调用外部工具（FFmpeg、yt-dlp等）

### 4.4 第三方依赖
- **Agent框架**：LangGraph + LangChain核心组件
- **视频下载**：yt-dlp
- **视频处理**：FFmpeg
- **网页抓取**：BeautifulSoup/Playwright
- **字幕处理**：pysrt

## 5. 开发计划

### 5.1 MVP版本（v1.0）
- [ ] 基础Web UI界面
- [ ] LangGraph工作流框架搭建
- [ ] YouTube视频翻译功能（单一工作流）
- [ ] 基本预览和调整功能
- [ ] 本地文件存储

### 5.2 完整版本（v1.5）
- [ ] 完整的三分支工作流图
- [ ] 视频解读功能
- [ ] 博客转视频功能
- [ ] 高级预览和编辑功能
- [ ] 工作流状态持久化和恢复

### 5.3 增强版本（v2.0）
- [ ] 云存储集成
- [ ] 多语言支持
- [ ] 高级视频编辑功能
- [ ] 插件系统

## 6. 风险评估与缓解

### 6.1 技术风险
- **API限制**：多服务商备选方案
- **处理性能**：线程池优化和硬件配置调整
- **内存管理**：大文件处理时的内存占用控制

### 6.2 法律风险
- **版权问题**：添加免责声明，用户自负责任
- **内容审核**：提供可选的内容过滤功能

### 6.3 用户体验风险
- **学习成本**：详细文档和教程
- **错误处理**：友好的错误提示和恢复机制

## 7. 成功指标

### 7.1 技术指标
- 处理成功率 > 95%
- 平均处理时间 < 视频时长 × 3
- 用户满意度 > 4.0/5.0

### 7.2 社区指标
- GitHub Star > 1000
- 活跃贡献者 > 50
- 问题解决率 > 90%
